<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <title>Trang chá»§</title>

    <link rel="stylesheet" type="text/css" href="css/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/css/bootstrap-theme.min.css" />
    <link rel="stylesheet" type="text/css" href="css/fontawesome/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="spec/lib/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="spec/lib/bootstrap.min.js"></script>

    <script type="text/javascript" src="js/index.js"></script>
</head>

<body>
    <div class="app container-fluid container-full-height" id="index">
        <div class="row row-full-height">
            <div class="col-md-2 col-sm-2 hidden-xs col-full-height">
                <div id="left-sidebar">
                    <div id="site-lang">
                        <span id="vi">
                        </span>
                        <span id="en">
                        </span>
                    </div>

                    <div id="logo">
                        <img src="img/logo.png" alt="akira-logo" class="img-responsive" />
                    </div>

                    <div id="social">
                        <div class="row center">
                            <div class="col-md-4 col-sm-4 col-xs-4 col-md-offset-2 col-sm-offset-2 col-xs-offset-2 ">
                                <a href="https://www.facebook.com/WOW.Japanese" target="_blank" class="social-circle">
                                    <i class="fa fa-facebook fb"></i>
                                </a>
                            </div>
                            <div class="col-md-4 col-sm-4 col-xs-4">
                                <a href="https://www.youtube.com/user/WowJapanese" target="_blank" class="social-circle">
                                    <i class="fa fa-youtube youtube"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-10 col-sm-10 col-xs-12 col-full-height center">
                <div id="content">
                    <div class="btn-group-vertical" id="login">
                        <h2>Login</h2>
                        <button class="btn-group facebook" onclick="onFbLoginClick();">Facebook</button>
                        <button class="btn-group google" onclick="onGPLoginClick();">Google</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <script type="text/javascript">
    window.fbAsyncInit = function() {
        FB.init({
            appId: "721532401232192",
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true // parse XFBML
        });
    };

    (function(d) {
        var js, id = 'facebook-jssdk',
            ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement('script');
        js.id = id;
        js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    }(document));

    function onFbLoginClick() {
        FB.login(function(response) {
            if (response.authResponse) {
                FB.api('/me', function(response) {
                    ajaxFbLogin(response);
                });
            } else {
                //user hit cancel button
                console.log('User cancelled login or did not fully authorize.');
            }
        }, {
            scope: 'email'
        });
    }

    function ajaxFbLogin(response) {
        $.ajax({
            type: 'POST',
            url: 'http://akira.edu.vn/wp-content/plugins/akira-api/akira_login.php',
            data: {
                type: "facebook_user_id",
                id: response.id
            }
        }).done(function(success) {
            localStorage.setItem("authorized", "true");
            localStorage.setItem("user", JSON.stringify(success));
            window.location.href = "view/totaln5";
        }).fail(function(error) {
            localStorage.setItem("authorized", "false");
        });
    }

    (function() {
        var po = document.createElement('script');
        po.type = 'text/javascript';
        po.async = true;
        po.src = 'https://plus.google.com/js/client:plusone.js?onload=start';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(po, s);
    })();

    function onGooglePlusLoginSuccess(authResult) {
        if (authResult['code']) {
            gapi.client.load('plus', 'v1', function() {
                var request = gapi.client.plus.people.get({
                    'userId': 'me'
                });
                request.execute(function(response) {
                    ajaxGoogleLogin(response);
                });
            });
        } else if (authResult['error']) {
            console.log('There was an error: ' + authResult['error']);
        }
    }

    function ajaxGoogleLogin(response) {
        console.log(response);
        /*$.ajax({
                    type:'POST',
                    url: 'http://akira.edu.vn/wp-content/plugins/akira-api/akira_login.php',
                    data: {type:"google_user_id",id:response.id}
                }).done(function(success){
                    sessionStorage.setItem("authorized","true");
                    window.location.href="dashboard.html";
                }).fail(function(error){
                    sessionStorage.setItem("authorized","false");
                });*/
    }

    function onGPLoginClick() {
        var additionalParams = {
            'callback': ajaxGoogleLogin,
            'data-cookiepolicy': none
        };
        gapi.auth.signIn(additionalParams);
    }


    function gSignin() {
        var additionalParams = {
            'callback': ajaxGoogleLogin
        };
        gapi.auth.signIn(additionalParams);
    }
    
    app.initialize();
    </script>

</body>

</html>
